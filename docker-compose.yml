version: '3.3'

services:
   vscode:
      build: .devcontainer
      volumes:
        - ./:/workspace
        - ~/.ssh:/home/vscode/.ssh:ro
        - ~/.ssh:/root/.ssh:ro
        - /var/run/docker.sock:/var/run/docker.sock
      environment:
        - TZ=Europe/Paris
      cap_add:
        - SYS_PTRACE
      security_opt:
        - seccomp:unconfined
      entrypoint: zsh -c "while sleep 1000; do :; done"
   source:
     image: frantiseks/postgres-sakila
     restart: always
     environment:
       POSTGRES_PASSWORD: sakila
     ports:
      - 5432:5432

   dest:
     image: frantiseks/postgres-sakila
     restart: always
     environment:
       POSTGRES_PASSWORD: sakila
     ports:
      - 5433:5432

   oracle_source:
     image: store/oracle/database-enterprise:12.2.0.1
     restart: always
     ports:
      - 1521:1521

   admin:
    image: dpage/pgadmin4
    restart: always
    environment:
        PGADMIN_DEFAULT_EMAIL: user@domain.com
        PGADMIN_DEFAULT_PASSWORD: SuperSecret
    ports:
        - 8080:80
